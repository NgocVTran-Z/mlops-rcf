sam build
sam deploy --guided

stack name: mlops-trigger-stack
region: us-east-1

# delete old stack
aws cloudformation delete-stack --stack-name mlops-trigger-stack

# check sagemaker role
aws sts get-caller-identity

{
    "UserId": "AROA6GBMBPWTWKY2OCT6P:SageMaker",
    "Account": "975049948583",
    "Arn": "arn:aws:sts::975049948583:assumed-role/AmazonSageMaker-ExecutionRole-20250518T181754/SageMaker"
}




touch .gitignore 

aws cloudformation describe-stacks \
  --stack-name mlops-trigger-stack \
  --query "Stacks[0].Outputs"

[
    {
        "OutputKey": "ApiTriggerEndpoint",
        "OutputValue": "https://rpyve3xy3e.execute-api.us-east-1.amazonaws.com/Prod/trigger",
        "Description": "API Gateway endpoint for triggering preprocessing pipeline"
    }
]



# upload manually
aws s3 cp pipelines/01_preprocessing_kmeans/preprocessing_kmeans.py \
  s3://swo-ngoctran-public/jobs/preprocessing_kmeans.py
